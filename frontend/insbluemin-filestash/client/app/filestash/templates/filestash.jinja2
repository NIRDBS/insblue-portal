{% extends 'base.jinja2' %}
{% block stylesheet %}
  <link rel="stylesheet" href="{{ url_for('Filestash.static',filename='dist/css/filestash.css') }}">
{% endblock %}

{% block html_head %}
{% endblock %}
{% block title %} Documente Intranet {% endblock %}
{% block main %}

  <div class="relative overflow-x-auto" style="height: 95%">
    <div class="pb-4 bg-white dark:bg-gray-900 h-full">
      <iframe style="width:100%; height: 100%;border: 9px solid #0000001a;border-radius: 5px;box-sizing:border-box;" id="appframe" frameborder="0"
              src="{{ iframe_src }}" allow="fullscreen;speaker"></iframe>
    </div>
  </div>

  <script>
      // Listen for messages from the iframe
      window.addEventListener('message', (event) => {
          if (event.origin === 'https://files.incdsb.ro') {
              const nextURL = '?loc=' + event.data.url.slice(23);
              const nextState = {additionalInformation: 'Updated the URL with JS'};
              // This will create a new entry in the browser's history, without reloading
              window.history.pushState(nextState, "", nextURL);
              // This will replace the current entry in the browser's history, without reloading
              window.history.replaceState(nextState, "", nextURL);
          }
      }, false);

  </script>
{% endblock main %}

